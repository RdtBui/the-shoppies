{"ast":null,"code":"import _regeneratorRuntime from\"/home/richard/Development/reactjs/beta-shoppies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/richard/Development/reactjs/beta-shoppies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/richard/Development/reactjs/beta-shoppies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./MovieItem.css';import React,{useState,useEffect}from'react';import NA from'../assets/funny.jpg';import omdb from'../api/omdb';import Button from'@material-ui/core/Button';import AddCircleOutlineIcon from'@material-ui/icons/AddCircleOutline';import{makeStyles}from'@material-ui/core/styles';import Accordion from'@material-ui/core/Accordion';import AccordionDetails from'@material-ui/core/AccordionDetails';import AccordionSummary from'@material-ui/core/AccordionSummary';import Typography from'@material-ui/core/Typography';import ExpandMoreIcon from'@material-ui/icons/ExpandMore';import Divider from'@material-ui/core/Divider';import Grid from'@material-ui/core/Grid';import Box from'@material-ui/core/Box';import MovieDetails from'./MovieDetails';import Snackbar from'@material-ui/core/Snackbar';import Alert from'@material-ui/lab/Alert';import AlertWarning from'./AlertWarning';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{width:'100%'},heading:{flexBasis:'33.33%',flexShrink:0},secondaryHeading:{// fontSize: theme.typography.pxToRem(15),\ncolor:theme.palette.text.secondary}};});var MovieItem=function MovieItem(_ref){var movie=_ref.movie,onNominate=_ref.onNominate,nominations=_ref.nominations,panelIndex=_ref.panelIndex,expanded=_ref.expanded,handleChange=_ref.handleChange;var movieId=movie.imdbID;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),awards=_useState4[0],setAwards=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),runtime=_useState6[0],setRuntime=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),releasedYear=_useState8[0],setReleasedYear=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),country=_useState10[0],setCountry=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isDisable=_useState12[0],setIsDisable=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),openAlert=_useState14[0],setOpenAlert=_useState14[1];// from Movielist\nvar classes=useStyles();useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return omdb.get('',{params:{i:movieId,plot:\"full\"}});case 2:response=_context.sent;results=response.data;setTitle(results.Title);setAwards(results.Awards);setRuntime(results.Runtime);setReleasedYear(results.Year);setCountry(results.Country);case 9:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();});// Disable and enable button according to nomination\nuseEffect(function(){if(nominations.includes(movie)){setIsDisable(true);}else{setIsDisable(false);}});// Extract more detailed information of the movie when more info is needed\nvar onNominateMovie=function onNominateMovie(nominatedMovie){// Verifies if the nomination has already been nominated\nconsole.log(\"Current nominations: \");console.log(nominations);if(nominations.includes(nominatedMovie)){console.log(\"Already nominated!\");}else if(nominations.length<5){setIsDisable(true);console.log(\"New nomination\");onNominate(nominatedMovie);}else if(nominations.length===5){console.log(\"Nomination list full\");setOpenAlert(true);}};var handleClose=function handleClose(event,reason){if(reason==='clickaway'){return;}setOpenAlert(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Accordion,{expanded:expanded===\"panel\".concat(panelIndex),onChange:handleChange(\"panel\".concat(panelIndex)),children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),\"aria-controls\":\"panel\".concat(panelIndex,\"bh-content\"),id:\"panel\".concat(panelIndex,\"bh-header\"),children:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"row\",children:[/*#__PURE__*/_jsx(Grid,{item:true,sm:\"3\",children:/*#__PURE__*/_jsx(\"img\",{alt:movie.Title,src:movie.Poster===\"N/A\"?NA:movie.Poster})}),/*#__PURE__*/_jsx(Grid,{alignItems:\"flex-start\",sm:\"9\",children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:title}),/*#__PURE__*/_jsxs(Typography,{className:classes.secondaryHeading,children:[releasedYear,\" (\",country,\")  |  \",runtime,\" \"]}),awards==='N/A'?'':/*#__PURE__*/_jsx(Alert,{severity:\"info\",children:/*#__PURE__*/_jsx(Typography,{children:awards})}),/*#__PURE__*/_jsx(Box// Prevents the nominate button from opening the detail sheet\n,{onClick:function onClick(event){return event.stopPropagation();},onFocus:function onFocus(event){return event.stopPropagation();},flexDirection:\"column\",display:\"flex\",alignItems:\"center\",children:/*#__PURE__*/_jsx(\"span\",{style:{cursor:'not-allowed'},children:/*#__PURE__*/_jsx(Button,{endIcon:/*#__PURE__*/_jsx(AddCircleOutlineIcon,{}),disabled:isDisable,size:\"small\",variant:\"contained\",color:\"secondary\",onClick:function onClick(){return onNominateMovie(movie);},children:\"Nominate\"})})})]})})]})}),/*#__PURE__*/_jsx(Divider,{variant:\"middle\"}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsx(MovieDetails,{movieId:movieId})})]}),/*#__PURE__*/_jsx(AlertWarning,{handleOpen:openAlert,handleClose:handleClose})]});};export default MovieItem;","map":{"version":3,"sources":["/home/richard/Development/reactjs/beta-shoppies/src/components/MovieItem.js"],"names":["React","useState","useEffect","NA","omdb","Button","AddCircleOutlineIcon","makeStyles","Accordion","AccordionDetails","AccordionSummary","Typography","ExpandMoreIcon","Divider","Grid","Box","MovieDetails","Snackbar","Alert","AlertWarning","useStyles","theme","root","width","heading","flexBasis","flexShrink","secondaryHeading","color","palette","text","secondary","MovieItem","movie","onNominate","nominations","panelIndex","expanded","handleChange","movieId","imdbID","title","setTitle","awards","setAwards","runtime","setRuntime","releasedYear","setReleasedYear","country","setCountry","isDisable","setIsDisable","openAlert","setOpenAlert","classes","fetchData","get","params","i","plot","response","results","data","Title","Awards","Runtime","Year","Country","includes","onNominateMovie","nominatedMovie","console","log","length","handleClose","event","reason","Poster","stopPropagation","cursor"],"mappings":"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","sourcesContent":["import './MovieItem.css';\nimport React, { useState, useEffect } from 'react';\nimport NA from '../assets/funny.jpg';\nimport omdb from '../api/omdb';\nimport Button from '@material-ui/core/Button';\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Divider from '@material-ui/core/Divider';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport MovieDetails from './MovieDetails'\n\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Alert from '@material-ui/lab/Alert';\nimport AlertWarning from './AlertWarning';\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n    },\n    heading: {\n        flexBasis: '33.33%',\n        flexShrink: 0,\n    },\n    secondaryHeading: {\n        // fontSize: theme.typography.pxToRem(15),\n        color: theme.palette.text.secondary\n    },\n}));\n\n\nconst MovieItem = ({ movie, onNominate, nominations, panelIndex, expanded, handleChange }) => {\n\n    const movieId = movie.imdbID;\n    const [title, setTitle] = useState('');\n    const [awards, setAwards] = useState('');\n    const [runtime, setRuntime] = useState('');\n    const [releasedYear, setReleasedYear] = useState('');\n    const [country, setCountry] = useState('');\n    const [isDisable, setIsDisable] = useState(false);\n    const [openAlert, setOpenAlert] = useState(false);\n\n    // from Movielist\n    const classes = useStyles();\n\n    useEffect(() => {\n        const fetchData = async () => {\n            const response = await omdb.get(\n                '',\n                {\n                    params: {\n                        i: movieId,\n                        plot: \"full\"\n                    }\n                }\n            );\n\n            const results = response.data;\n            setTitle(results.Title);\n            setAwards(results.Awards);\n            setRuntime(results.Runtime);\n            setReleasedYear(results.Year);\n            setCountry(results.Country);\n        };\n        fetchData();\n    });\n\n    // Disable and enable button according to nomination\n    useEffect(() => {\n        if (nominations.includes(movie)) {\n            setIsDisable(true);\n        } else {\n            setIsDisable(false);\n        }\n    });\n\n    // Extract more detailed information of the movie when more info is needed\n    const onNominateMovie = (nominatedMovie) => {\n        // Verifies if the nomination has already been nominated\n        console.log(\"Current nominations: \");\n        console.log(nominations);\n        if (nominations.includes(nominatedMovie)) {\n            console.log(\"Already nominated!\");\n        } else if (nominations.length < 5) {\n            setIsDisable(true);\n            console.log(\"New nomination\");\n            onNominate(nominatedMovie);\n        } else if (nominations.length === 5) {\n            console.log(\"Nomination list full\");\n            setOpenAlert(true);\n        }\n    };\n\n    const handleClose = (event, reason) => {\n        if (reason === 'clickaway') {\n            return;\n        }\n        setOpenAlert(false);\n    };\n\n\n    return (\n        <div>\n            <Accordion expanded={expanded === `panel${panelIndex}`} onChange={handleChange(`panel${panelIndex}`)}>\n                <AccordionSummary\n                    expandIcon={<ExpandMoreIcon />}\n                    aria-controls={`panel${panelIndex}bh-content`}\n                    id={`panel${panelIndex}bh-header`}\n                >\n                    <Grid container direction=\"row\">\n                        <Grid item sm=\"3\">\n                            <img alt={movie.Title} src={movie.Poster === \"N/A\" ? NA : movie.Poster} />\n                        </Grid>\n\n                        <Grid alignItems=\"flex-start\" sm=\"9\">\n                            <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\n                                <Typography variant=\"h5\">{title}</Typography>\n                                <Typography className={classes.secondaryHeading}>{releasedYear} ({country})  |  {runtime} </Typography>\n                                {awards === 'N/A' ? '' : <Alert severity=\"info\"><Typography>{awards}</Typography></Alert>}\n                                <Box\n                                    // Prevents the nominate button from opening the detail sheet\n                                    onClick={(event) => event.stopPropagation()}\n                                    onFocus={(event) => event.stopPropagation()}\n                                    flexDirection=\"column\"\n                                    display=\"flex\"\n                                    alignItems=\"center\"\n                                >\n                                    <span style={{ cursor: 'not-allowed' }}>\n                                        <Button\n                                            endIcon={< AddCircleOutlineIcon />}\n                                            disabled={isDisable}\n                                            size=\"small\"\n                                            variant=\"contained\"\n                                            color=\"secondary\"\n                                            onClick={() => onNominateMovie(movie)} >\n                                            Nominate\n                                </Button>\n                                    </span>\n                                </Box>\n                            </Box>\n                        </Grid>\n                    </Grid>\n                </AccordionSummary>\n                <Divider variant=\"middle\" />\n                <AccordionDetails>\n                    <MovieDetails movieId={movieId} />\n                </AccordionDetails>\n            </Accordion>\n            <AlertWarning handleOpen={openAlert} handleClose={handleClose} />\n\n        </div>\n    );\n};\n\nexport default MovieItem;"]},"metadata":{},"sourceType":"module"}