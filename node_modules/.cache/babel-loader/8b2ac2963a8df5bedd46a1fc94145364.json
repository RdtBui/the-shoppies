{"ast":null,"code":"import _regeneratorRuntime from\"/home/richard/Development/reactjs/beta-shoppies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/richard/Development/reactjs/beta-shoppies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/richard/Development/reactjs/beta-shoppies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./MovieItem.css';import React,{useState,useEffect}from'react';import NA from'../assets/funny.jpg';import omdb from'../api/omdb';import Button from'@material-ui/core/Button';import FavoriteIcon from'@material-ui/icons/Favorite';import{makeStyles}from'@material-ui/core/styles';import Accordion from'@material-ui/core/Accordion';import AccordionDetails from'@material-ui/core/AccordionDetails';import AccordionSummary from'@material-ui/core/AccordionSummary';import Typography from'@material-ui/core/Typography';import ExpandMoreIcon from'@material-ui/icons/ExpandMore';import Divider from'@material-ui/core/Divider';import Grid from'@material-ui/core/Grid';import Box from'@material-ui/core/Box';import MovieDetails from'./MovieDetails';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{width:'100%'},heading:{flexBasis:'33.33%',flexShrink:0},secondaryHeading:{// fontSize: theme.typography.pxToRem(15),\ncolor:theme.palette.text.secondary}};});var MovieItem=function MovieItem(_ref){var movie=_ref.movie,onNominate=_ref.onNominate,nominations=_ref.nominations,panelIndex=_ref.panelIndex,expanded=_ref.expanded,handleChange=_ref.handleChange;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),movieId=_useState2[0],setMovieId=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),awards=_useState6[0],setAwards=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),runtime=_useState8[0],setRuntime=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),releasedYear=_useState10[0],setReleasedYear=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),country=_useState12[0],setCountry=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isDisable=_useState14[0],setIsDisable=_useState14[1];// from Movielist\nvar classes=useStyles();useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setMovieId(movie.imdbID);_context.next=3;return omdb.get('',{params:{i:movieId,plot:\"full\"}});case 3:response=_context.sent;results=response.data;setTitle(results.Title);setAwards(results.Awards);setRuntime(results.Runtime);setReleasedYear(results.Year);setCountry(results.Country);case 10:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[movie.imdbID,movieId]);// Disable and enable button according to nomination\nuseEffect(function(){if(nominations.includes(movie)){setIsDisable(true);}else{setIsDisable(false);}});// Extract more detailed information of the movie when more info is needed\nvar onNominateMovie=function onNominateMovie(nominatedMovie){// Verifies if the nomination has already been nominated\nconsole.log(\"Current nominations: \");console.log(nominations);if(nominations.includes(nominatedMovie)){console.log(\"Already nominated!\");}else if(nominations.length<5){setIsDisable(true);console.log(\"New nomination\");onNominate(nominatedMovie);}};return/*#__PURE__*/_jsxs(Accordion,{expanded:expanded===\"panel\".concat(panelIndex),onChange:handleChange(\"panel\".concat(panelIndex)),children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),\"aria-controls\":\"panel\".concat(panelIndex,\"bh-content\"),id:\"panel\".concat(panelIndex,\"bh-header\"),children:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"row\",children:[/*#__PURE__*/_jsx(Grid,{item:true,sm:\"3\",children:/*#__PURE__*/_jsx(\"img\",{alt:movie.Title,src:movie.Poster===\"N/A\"?NA:movie.Poster})}),/*#__PURE__*/_jsx(Grid,{alignItems:\"flex-start\",sm:\"9\",children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:title}),/*#__PURE__*/_jsxs(Typography,{className:classes.secondaryHeading,children:[releasedYear,\" (\",country,\")  |  \",runtime,\" \"]}),/*#__PURE__*/_jsx(Typography,{children:awards==='N/A'?'':awards}),/*#__PURE__*/_jsx(Box// Prevents the nominate button from opening the detail sheet\n,{onClick:function onClick(event){return event.stopPropagation();},onFocus:function onFocus(event){return event.stopPropagation();},flexDirection:\"column\",display:\"flex\",alignItems:\"center\",children:/*#__PURE__*/_jsx(\"span\",{style:{cursor:'not-allowed'},children:/*#__PURE__*/_jsx(Button,{endIcon:/*#__PURE__*/_jsx(FavoriteIcon,{}),disabled:isDisable,size:\"small\",variant:\"contained\",color:\"secondary\",onClick:function onClick(){return onNominateMovie(movie);},children:\"Nominate\"})})})]})})]})}),/*#__PURE__*/_jsx(Divider,{variant:\"middle\"}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsx(MovieDetails,{movieId:movieId})})]});};export default MovieItem;","map":{"version":3,"sources":["/home/richard/Development/reactjs/beta-shoppies/src/components/MovieItem.js"],"names":["React","useState","useEffect","NA","omdb","Button","FavoriteIcon","makeStyles","Accordion","AccordionDetails","AccordionSummary","Typography","ExpandMoreIcon","Divider","Grid","Box","MovieDetails","useStyles","theme","root","width","heading","flexBasis","flexShrink","secondaryHeading","color","palette","text","secondary","MovieItem","movie","onNominate","nominations","panelIndex","expanded","handleChange","movieId","setMovieId","title","setTitle","awards","setAwards","runtime","setRuntime","releasedYear","setReleasedYear","country","setCountry","isDisable","setIsDisable","classes","fetchData","imdbID","get","params","i","plot","response","results","data","Title","Awards","Runtime","Year","Country","includes","onNominateMovie","nominatedMovie","console","log","length","Poster","event","stopPropagation","cursor"],"mappings":"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","sourcesContent":["import './MovieItem.css';\nimport React, { useState, useEffect } from 'react';\nimport NA from '../assets/funny.jpg';\nimport omdb from '../api/omdb';\nimport Button from '@material-ui/core/Button';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Divider from '@material-ui/core/Divider';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport MovieDetails from './MovieDetails'\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n    },\n    heading: {\n        flexBasis: '33.33%',\n        flexShrink: 0,\n    },\n    secondaryHeading: {\n        // fontSize: theme.typography.pxToRem(15),\n        color: theme.palette.text.secondary\n    },\n}));\n\nconst MovieItem = ({ movie, onNominate, nominations, panelIndex, expanded, handleChange }) => {\n\n    const [movieId, setMovieId] = useState('');\n    const [title, setTitle] = useState('');\n    const [awards, setAwards] = useState('');\n    const [runtime, setRuntime] = useState('');\n    const [releasedYear, setReleasedYear] = useState('');\n    const [country, setCountry] = useState('');\n    const [isDisable, setIsDisable] = useState(false);\n\n    // from Movielist\n    const classes = useStyles();\n\n    useEffect(() => {\n        const fetchData = async () => {\n\n            setMovieId(movie.imdbID);\n\n            const response = await omdb.get(\n                '',\n                {\n                    params: {\n                        i: movieId,\n                        plot: \"full\"\n                    }\n                }\n            );\n\n            const results = response.data;\n\n            setTitle(results.Title);\n            setAwards(results.Awards);\n            setRuntime(results.Runtime);\n            setReleasedYear(results.Year);\n            setCountry(results.Country);\n        };\n        fetchData();\n    }, [movie.imdbID, movieId]);\n\n    // Disable and enable button according to nomination\n    useEffect(() => {\n        if (nominations.includes(movie)) {\n            setIsDisable(true);\n        } else {\n            setIsDisable(false);\n        }\n    });\n\n    // Extract more detailed information of the movie when more info is needed\n    const onNominateMovie = (nominatedMovie) => {\n        // Verifies if the nomination has already been nominated\n        console.log(\"Current nominations: \");\n        console.log(nominations);\n        if (nominations.includes(nominatedMovie)) {\n            console.log(\"Already nominated!\");\n        } else if (nominations.length < 5) {\n            setIsDisable(true);\n            console.log(\"New nomination\");\n            onNominate(nominatedMovie);\n        }\n    };\n\n    return (\n        <Accordion expanded={expanded === `panel${panelIndex}`} onChange={handleChange(`panel${panelIndex}`)}>\n            <AccordionSummary\n                expandIcon={<ExpandMoreIcon />}\n                aria-controls={`panel${panelIndex}bh-content`}\n                id={`panel${panelIndex}bh-header`}\n            >\n                <Grid container direction=\"row\">\n                    <Grid item sm=\"3\">\n                        <img alt={movie.Title} src={movie.Poster === \"N/A\" ? NA : movie.Poster} />\n                    </Grid>\n\n                    <Grid alignItems=\"flex-start\" sm=\"9\">\n                        <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\n                            <Typography variant=\"h5\">{title}</Typography>\n                            <Typography className={classes.secondaryHeading}>{releasedYear} ({country})  |  {runtime} </Typography>\n                            <Typography>{awards === 'N/A' ? '' : awards}</Typography>\n                            <Box\n                                // Prevents the nominate button from opening the detail sheet\n                                onClick={(event) => event.stopPropagation()}\n                                onFocus={(event) => event.stopPropagation()}\n                                flexDirection=\"column\"\n                                display=\"flex\"\n                                alignItems=\"center\"\n                            >\n                                <span style={{ cursor: 'not-allowed' }}>\n                                    <Button\n                                        endIcon={<FavoriteIcon />}\n                                        disabled={isDisable}\n                                        size=\"small\"\n                                        variant=\"contained\"\n                                        color=\"secondary\"\n                                        onClick={() => onNominateMovie(movie)} >\n                                        Nominate\n                                </Button>\n                                </span>\n                            </Box>\n                        </Box>\n                    </Grid>\n                </Grid>\n\n            </AccordionSummary>\n            <Divider variant=\"middle\" />\n            <AccordionDetails>\n                <MovieDetails movieId={movieId} />\n            </AccordionDetails>\n        </Accordion>\n    );\n};\n\nexport default MovieItem;"]},"metadata":{},"sourceType":"module"}